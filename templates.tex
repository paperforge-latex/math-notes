% ================== preamble+templates.tex ==================
% 목적: 한글/수학 기본 설정 + cleveref 한국어화 + 환경 추가
% 사용법:
%   \input{preamble+templates.tex}
%   % 통합 카운터를 원하면, input 이전에 \mergedcountertrue 선언

% ----- 한글/수학/타이포그래피 기본 -----
\usepackage{kotex}                 % 한글 조판
\usepackage{amsmath,amssymb,amsthm}% 수학 패키지
\usepackage{mathtools}             % amsmath 보완
\usepackage{graphicx}              % 이미지
\usepackage{indentfirst}           % 첫 문단 들여쓰기
\usepackage{microtype}             % 자간 미세조정
\usepackage{setspace}              % 줄 간격 조절
\usepackage[dvipsnames]{xcolor}    % 색상
\usepackage[a4paper,margin=25mm]{geometry} % 여백
\setstretch{1.5}

% ================== cleveref 한국어 전체 설정 ==================
\usepackage[hidelinks,unicode]{hyperref}
\usepackage[nameinlink,noabbrev]{cleveref}

% ----- 정리/정의/예제 환경 -----
\numberwithin{equation}{section}   % 수식 번호: 섹션별 (1.1)
\newtheorem{theorem}{정리}[section]
\newtheorem{lemma}{보조정리}[section]
\newtheorem{definition}{정의}[section]
\newtheorem{example}{예제}[section]
\newtheorem{proposition}{명제}[section]
\newtheorem{corollary}{따름정리}[section]
\newtheorem{conjecture}{추측}[section]
\theoremstyle{remark}
\newtheorem*{remark}{주석}
\renewcommand{\proofname}{증명}

% ---------- cleveref 한국어 접두어 ----------
\crefname{equation}{식}{식}
\Crefname{equation}{식}{식}
\crefname{theorem}{정리}{정리}
\Crefname{theorem}{정리}{정리}
\crefname{lemma}{보조정리}{보조정리}
\Crefname{lemma}{보조정리}{보조정리}
\crefname{proposition}{명제}{명제}
\Crefname{proposition}{명제}{명제}
\crefname{corollary}{따름정리}{따름정리}
\Crefname{corollary}{따름정리}{따름정리}
\crefname{definition}{정의}{정의}
\Crefname{definition}{정의}{정의}
\crefname{remark}{주석}{주석}
\Crefname{remark}{주석}{주석}
\crefname{example}{예제}{예제}
\Crefname{example}{예제}{예제}
\crefname{figure}{그림}{그림}
\Crefname{figure}{그림}{그림}
\crefname{table}{표}{표}
\Crefname{table}{표}{표}
\crefname{section}{절}{절}
\Crefname{section}{절}{절}
\crefname{subsection}{소절}{소절}
\Crefname{subsection}{소절}{소절}
\crefname{appendix}{부록}{부록}
\Crefname{appendix}{부록}{부록}
\crefname{page}{쪽}{쪽}
\Crefname{page}{쪽}{쪽}

% ---------- 다중 참조 접속사 ----------
\newcommand{\crefpairconjunction}{과 }
\newcommand{\creflastconjunction}{과 }
\newcommand{\crefrangeconjunction}{에서 }

% ================== 추가 환경 ==================

% ---------- 단락 래퍼 ----------
% 사용 예:
% \begin{parblock}
%   이 단락은 앞뒤로 여백이 생깁니다.
% \end{parblock}
\newenvironment{parblock}{%
  \par\addvspace{.6\baselineskip}\noindent
}{%
  \par\addvspace{.6\baselineskip}
}

% ---------- 인용 환경 ----------
% 사용 예:
% \begin{quotationblock}[가우스]
%   수학은 과학의 여왕이다.
% \end{quotationblock}
\usepackage{xparse}
\NewDocumentEnvironment{quotationblock}{o}{%
  \begin{quote}\itshape
}{%
  \IfNoValueTF{#1}{}{%
    \par\hfill--- #1%
  }%
  \end{quote}
}

% ---------- 카운터 통합 옵션 ----------
\newif\ifmergedcounter
\mergedcounterfalse
% 통합 카운터를 원하면, \input 이전에 \mergedcountertrue 선언

\ifmergedcounter
  \let\c@lemma\c@theorem
  \let\c@proposition\c@theorem
  \let\c@corollary\c@theorem
  \let\c@definition\c@theorem
  \let\c@conjecture\c@theorem
  \let\c@example\c@theorem
\fi

% ---------- 무번호(*) 변형 ----------
\newtheorem*{theorem*}{정리}
\newtheorem*{lemma*}{보조정리}
\newtheorem*{proposition*}{명제}
\newtheorem*{corollary*}{따름정리}
\newtheorem*{definition*}{정의}
\newtheorem*{conjecture*}{추측}

% ---------- 증명/풀이 ----------
% 수식 옆 QED 출력:
\newcommand{\QEDhere}{\qedhere}

% 풀이 환경
% 사용 예:
% \begin{solution}
%   두 점 사이의 거리를 구하면 ...
% \end{solution}
\newenvironment{solution}{\begin{proof}[풀이]}{\end{proof}}

\setmainhangulfont{UnBatang}[ItalicFont={*}, ItalicFeatures={FakeSlant=.167}]

% % ----- 한글/수학/타이포그래피 기본 -----
% \usepackage{kotex}                 % 한글 조판
% \usepackage{amsmath,amssymb,amsthm}% 수학 패키지
% \usepackage{mathtools}             % amsmath 보완
% \usepackage{graphicx}              % 이미지
% \usepackage{indentfirst}           % 첫 문단 들여쓰기
% \usepackage{microtype}             % 자간 미세조정(라틴 위주, 한글도 일부 도움)
% \usepackage{setspace}              % 줄 간격 조절 
% \usepackage[dvipsnames]{xcolor}    % 색상 (color → xcolor 권장)
% \usepackage[a4paper,margin=25mm]{geometry} % 여백
% \setstretch{1.5}

% % ================== cleveref 한국어 전체 설정 템플릿 ==================
% % (hyperref → cleveref 순서 중요)
% \usepackage[hidelinks,unicode]{hyperref}
% \usepackage[nameinlink,noabbrev]{cleveref}


% % ----- 정리/정의/예제 환경 -----
% \numberwithin{equation}{section}   % 수식 번호: 섹션별 (1.1) 형태
% \newtheorem{theorem}{정리}[section]   % → "정리 1.1", "정리 2.3" 등
% \newtheorem{lemma}{보조정리}[section] % → "보조정리 1.2"
% \newtheorem{definition}{정의}[section]% → "정의 1.3"
% \newtheorem{example}{예제}[section]   % → "예제 1.4"
% \renewcommand{\proofname}{증명}       % Proof → "증명"

% % ---------- 한국어 접두어/대문자형 ----------
% % 수식
% \crefname{equation}{식}{식}
% \Crefname{equation}{식}{식}
% % 정리류(amsthm 기반)
% \crefname{theorem}{정리}{정리}
% \Crefname{theorem}{정리}{정리}
% \crefname{lemma}{보조정리}{보조정리}
% \Crefname{lemma}{보조정리}{보조정리}
% \crefname{proposition}{명제}{명제}
% \Crefname{proposition}{명제}{명제}
% \crefname{corollary}{따름정리}{따름정리}
% \Crefname{corollary}{따름정리}{따름정리}
% \crefname{definition}{정의}{정의}
% \Crefname{definition}{정의}{정의}
% \crefname{remark}{주석}{주석}
% \Crefname{remark}{주석}{주석}
% \crefname{example}{예제}{예제}
% \Crefname{example}{예제}{예제}

% % 그림/표/절
% \crefname{figure}{그림}{그림}
% \Crefname{figure}{그림}{그림}
% \crefname{table}{표}{표}
% \Crefname{table}{표}{표}
% \crefname{section}{절}{절}
% \Crefname{section}{절}{절}
% \crefname{subsection}{소절}{소절}
% \Crefname{subsection}{소절}{소절}
% \crefname{appendix}{부록}{부록}
% \Crefname{appendix}{부록}{부록}
% \crefname{page}{쪽}{쪽}
% \Crefname{page}{쪽}{쪽}

% % ---------- 다중 참조 접속사(한국어화) ----------
% % 두 개 참조: “식 (1)과 (2)”
% \newcommand{\crefpairconjunction}{과 }
% % 세 개 이상에서 마지막 연결: “(1), (2)과 (3)”
% \newcommand{\creflastconjunction}{과 }
% % 범위: “식 (1)에서 (3)”
% \newcommand{\crefrangeconjunction}{에서 }

% % ---------- 출력 모양 미세 조정(선택) ----------
% % “식(1)”보다 “식 (1)” 선호 + 간격 축소
% % \crefformat{equation}{식\,(#2#1#3)}
% % \Crefformat{equation}{식\,(#2#1#3)}
% % % 같은 방식으로 그림/표도 조정 가능
% % \crefformat{figure}{그림\,#2#1#3}
% % \Crefformat{figure}{그림\,#2#1#3}
% % \crefformat{table}{표\,#2#1#3}
% % \Crefformat{table}{표\,#2#1#3}

% % ---------- 예: 라벨 이름 권장 규칙 ----------
% % eq:sum, eq:diff / thm:main / fig:arch / tab:metrics / sec:method 등
% % \label{eq:sum}, \label{thm:main}, ...
% % =================================================



% % ================== templates.tex : 경량 환경 추가 ==================
% % 목적: 단락/인용, 정리류 카운터 일체화(옵션), QED 도구 제공
% % 의존: amsmath, amsthm, xparse (이미 상단에서 로드됨 가정)

% % ---------- 단락 래퍼 ----------
% % 사용 예:
% % \begin{parblock}
% %   이 단락은 앞뒤로 여백이 생깁니다.
% % \end{parblock}
% \newenvironment{parblock}{%
%   \par\addvspace{.6\baselineskip}\noindent
% }{%
%   \par\addvspace{.6\baselineskip}
% }

% % ---------- 인용 환경 ----------
% % 사용 예:
% % \begin{quotationblock}[가우스]
% %   수학은 과학의 여왕이다.
% % \end{quotationblock}
% \RequirePackage{xparse}
% \NewDocumentEnvironment{quotationblock}{o}{%
%   \begin{quote}\itshape
% }{%
%   \IfNoValueTF{#1}{}{%
%     \par\hfill--- #1%
%   }%
%   \end{quote}
% }

% % ---------- 정리류 환경 ----------
% % 기본 정책:
% % - 섹션 기준 번호: (1.1) 스타일
% % - \mergedcountertrue 시 모든 정리류가 하나의 카운터 공유
% % - \mergedcounterfalse 시 각자 카운터
% % 사용 예:
% % \begin{theorem}[피타고라스]\label{thm:py}
% %   직각삼각형에서 ...
% % \end{theorem}
% \newif\ifmergedcounter
% \mergedcounterfalse % 기본: 분리 카운터

% \ifmergedcounter
%   \newtheorem{theorem}{정리}[section]
%   \newtheorem{lemma}[theorem]{보조정리}
%   \newtheorem{proposition}[theorem]{명제}
%   \newtheorem{corollary}[theorem]{따름정리}
%   \theoremstyle{definition}
%   \newtheorem{definition}[theorem]{정의}
%   \newtheorem{conjecture}[theorem]{추측}
%   \theoremstyle{remark}
%   \newtheorem*{remark}{주석}
% \else
%   \newtheorem{theorem}{정리}[section]
%   \newtheorem{lemma}{보조정리}[section]
%   \newtheorem{proposition}{명제}[section]
%   \newtheorem{corollary}{따름정리}[section]
%   \theoremstyle{definition}
%   \newtheorem{definition}{정의}[section]
%   \newtheorem{conjecture}{추측}[section]
%   \theoremstyle{remark}
%   \newtheorem*{remark}{주석}
% \fi

% % 무번호(*) 변형
% \newtheorem*{theorem*}{정리}
% \newtheorem*{lemma*}{보조정리}
% \newtheorem*{proposition*}{명제}
% \newtheorem*{corollary*}{따름정리}
% \newtheorem*{definition*}{정의}
% \newtheorem*{conjecture*}{추측}

% % ---------- 증명/풀이 ----------
% % Proof 캡션 한글화: \renewcommand{\proofname}{증명} (상단에서 이미 있음)
% % 수식 옆 QED 출력: \QedHere
% % 사용 예:
% % \begin{proof}
% %   $a^2+b^2=c^2$임을 보인다. \QedHere
% % \end{proof}
% \newcommand{\QedHere}{\qedhere}

% % 풀이 환경
% % 사용 예:
% % \begin{solution}
% %   두 점 사이의 거리를 구하면 ...
% % \end{solution}
% \newenvironment{solution}{\begin{proof}[풀이]}{\end{proof}}





% \section{기본 수식 작성법}

% \subsection{인라인 수식}

% 텍스트 중간에 수식을 넣을 때는 달러 기호를 사용합니다: $a^2 + b^2 = c^2$
% \begin{equation}
%     \int_{0}^{\infty} e^{-x^2} dx = \frac{\sqrt{\pi}}{2}
% \end{equation}

% \subsection{블록 수식}
% 별도의 줄에 수식을 표시할 때:
% \[
%     E = mc^2
% \]


% % =====================================
% \section{자주 사용하는 수학 기호}

% \subsection{기본 연산}
% \begin{itemize}
%     \item 분수: $\frac{a}{b}$
%     \item 제곱근: $\sqrt{x}$, $\sqrt[n]{x}$
%     \item 위첨자/아래첨자: $x^2$, $a_n$, $x_i^2$
%     \item 합/곱: $\sum_{i=1}^{n} i$, $\prod_{i=1}^{n} i$
% \end{itemize}

% \subsection{미적분}
% \begin{itemize}
%     \item 극한: $\lim_{x \to \infty} f(x)$
%     \item 미분: $\frac{df}{dx}$, $\frac{\partial f}{\partial x}$
%     \item 적분: $\int_{a}^{b} f(x) dx$
% \end{itemize}

% \subsection{선형대수}
% \begin{itemize}
%     \item 벡터: $\vec{v}$, $\mathbf{v}$
%     \item 행렬:
%     $\begin{pmatrix}
%         a & b \\
%         c & d
%     \end{pmatrix}$
%     \item 행렬식: $\det(A)$, $|A|$
% \end{itemize}

% % =====================================
% \section{정리와 증명 예제}

% \begin{definition}[소수]
%     1보다 큰 자연수 중에서 1과 자기 자신만을 약수로 가지는 수를 \textbf{소수}(prime number)라고 한다.
% \end{definition}

% \begin{theorem}[피타고라스 정리]
%     직각삼각형에서 빗변의 제곱은 나머지 두 변의 제곱의 합과 같다.
%     \[
%         c^2 = a^2 + b^2
%     \]
% \end{theorem}

% \begin{proof}
%     여기에 증명을 작성합니다.
%     \[
%         (a+b)^2 = a^2 + 2ab + b^2
%     \]
%     따라서 증명이 완료되었습니다.
% \end{proof}

% \begin{example}
%     $x^2 - 5x + 6 = 0$의 해를 구하시오.

%     \textbf{풀이:}
%     인수분해하면 $(x-2)(x-3) = 0$
%     따라서 $x = 2$ 또는 $x = 3$
% \end{example}

% % =====================================
% \section{연습 문제}

% \subsection{문제 1}
% 다음 적분을 계산하시오:
% \[
%     \int_0^1 x^2 dx
% \]

% \subsection{풀이}
% \begin{align}
%     \int_0^1 x^2 dx &= \left[ \frac{x^3}{3} \right]_0^1 \\
%                      &= \frac{1}{3} - 0 \\
%                      &= \frac{1}{3}
% \end{align}

% % =====================================
% \section{유용한 팁}

% \begin{itemize}
%     \item 여러 줄 수식은 \texttt{align} 환경 사용
%     \item 수식 번호 제거는 \texttt{*} 추가 (예: \texttt{align*})
%     \item 괄호 크기 자동 조절: \texttt{\textbackslash left(}, \texttt{\textbackslash right)}
%     \item 수식 내 텍스트: \texttt{\textbackslash text\{...\}}
% \end{itemize}

% =====================================
% 새로운 장을 추가하려면:
% \section{제목}
% 내용...
